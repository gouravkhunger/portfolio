{% assign projectName =  page.name | remove: '.md' %}

<div class="arrow-gallery">
    <div class="gallery-item">
        <img
                loading="lazy"
                id="gallery-image"
                src=""
                alt="Gallery Image"
        />
        <div class="arrow left-arrow round-button" onclick="changeImage(-1)">
            {% include left_arrow.html %}
        </div>
        <div class="arrow right-arrow round-button"  onclick="changeImage(1)">
            {% include right_arrow.html %}
        </div>
    </div>
</div>

<div class="scroll-gallery">
    <div class="scrolling-container" id="scrollingContainer">
        {% for image in site.data.projects[projectName].images %}
            <img
                loading="lazy"
                src="/assets/images/projects/{{ projectName }}/{{ image.source }}"
                alt="{{ image.alt }}"
            />
        {% endfor %}

    </div>
</div>


<!--Change image function-->
<script>
    let currentIndex = 0;
    let touchStartX = 0;
    let touchEndX = 0;
    const gallery = document.getElementById('gallery-image');

    const galleryImages = [
        {% for image in site.data.projects[projectName].images %}
        {
          image: "/assets/images/projects/{{ projectName }}/{{ image.source }}"
        },
        {% endfor %}
    ];


    function changeImage(offset) {
      currentIndex += offset;

      if (currentIndex < 0) {
        currentIndex = galleryImages.length - 1;
      } else if (currentIndex >= galleryImages.length) {
        currentIndex = 0;
      }

      gallery.src = galleryImages[currentIndex].image;
    }

    gallery.src = galleryImages[currentIndex].image;
</script>
